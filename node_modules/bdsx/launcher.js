"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bedrockServer = void 0;
const krevent_1 = require("krevent");
const assembler_1 = require("./assembler");
const command_1 = require("./bds/command");
const commandorigin_1 = require("./bds/commandorigin");
const dimension_1 = require("./bds/dimension");
const level_1 = require("./bds/level");
const proc_1 = require("./bds/proc");
const capi_1 = require("./capi");
const command_2 = require("./command");
const common_1 = require("./common");
const core_1 = require("./core");
const dll_1 = require("./dll");
const getline_1 = require("./getline");
const makefunc_1 = require("./makefunc");
const nativetype_1 = require("./nativetype");
const nethook_1 = require("./nethook");
const pointer_1 = require("./pointer");
const sharedpointer_1 = require("./sharedpointer");
const source_map_support_1 = require("./source-map-support");
const unlocker_1 = require("./unlocker");
const util_1 = require("./util");
const windows_h_1 = require("./windows_h");
const readline = require("readline");
const colors = require("colors");
const bd_server = require("./bds/server");
const nimodule = require("./bds/networkidentifier");
const asmcode = require("./asm/asmcode");
class Liner {
    constructor() {
        this.remaining = '';
    }
    write(str) {
        const lastidx = str.lastIndexOf('\n');
        if (lastidx === -1) {
            this.remaining += str;
            return null;
        }
        else {
            const out = this.remaining + str.substr(0, lastidx);
            this.remaining = str.substr(lastidx + 1);
            return out;
        }
    }
}
const STATUS_NO_NODE_THREAD = (0xE0000001 | 0);
// default runtime error handler
core_1.runtimeError.setHandler(err => {
    source_map_support_1.remapError(err);
    const lastSender = core_1.ipfilter.getLastSender();
    console.error('[ Native Crash ]');
    console.error(`Last Sender IP: ${lastSender}`);
    console.error('[ Native Stack ]');
    switch (err.code) {
        case STATUS_NO_NODE_THREAD:
            console.error(`JS Accessing from the out of threads`);
            break;
        case windows_h_1.EXCEPTION_ACCESS_VIOLATION:
            console.error(`Accessing the invalid memory address`);
            break;
        case windows_h_1.STATUS_INVALID_PARAMETER:
            console.error(`Native function received wrong parameters`);
            break;
    }
    console.error(err.nativeStack);
    console.error('[ JS Stack ]');
    console.error(err.stack);
});
let launched = false;
const bedrockLogLiner = new Liner;
const cmdOutputLiner = new Liner;
const openEvTarget = new krevent_1.default();
const updateEvTarget = new krevent_1.default();
const errorEvTarget = new krevent_1.default();
const closeEvTarget = new krevent_1.default();
const logEvTarget = new krevent_1.default();
const commandOutputEvTarget = new krevent_1.default();
const commandQueue = new core_1.MultiThreadQueue(nativetype_1.CxxString[nativetype_1.NativeType.size]);
const commandQueueBuffer = new pointer_1.CxxStringWrapper(true);
function patchForStdio() {
    // hook bedrock log
    asmcode.bedrockLogNp = makefunc_1.makefunc.np((severity, msgptr, size) => {
        // void(*callback)(int severity, const char* msg, size_t size)
        const line = bedrockLogLiner.write(msgptr.getString(size, 0, common_1.Encoding.Utf8));
        if (line === null)
            return;
        let color;
        switch (severity) {
            case 1:
                color = colors.white;
                break;
            case 2:
                color = colors.brightWhite;
                break;
            case 4:
                color = colors.brightYellow;
                break;
            default:
                color = colors.brightRed;
                break;
        }
        if (logEvTarget.fire(line, color) === common_1.CANCEL)
            return;
        console.log(color(line));
    }, makefunc_1.RawTypeId.Void, null, makefunc_1.RawTypeId.Int32, core_1.StaticPointer, makefunc_1.RawTypeId.FloatAsInt64);
    proc_1.procHacker.write('BedrockLogOut', 0, assembler_1.asm().jmp64(asmcode.logHook, assembler_1.Register.rax));
    asmcode.CommandOutputSenderHookCallback = makefunc_1.makefunc.np((bytes, ptr) => {
        // void(*callback)(const char* log, size_t size)
        const line = cmdOutputLiner.write(ptr.getString(bytes));
        if (line === null)
            return;
        if (commandOutputEvTarget.fire(line) !== common_1.CANCEL) {
            console.log(line);
        }
    }, makefunc_1.RawTypeId.Void, null, makefunc_1.RawTypeId.FloatAsInt64, core_1.StaticPointer);
    proc_1.procHacker.patching('hook-command-output', 'CommandOutputSender::send', 0x217, asmcode.CommandOutputSenderHook, assembler_1.Register.rax, true, [
        0xE8, 0xFF, 0xFF, 0xFF, 0xFF,
        0x48, 0x8D, 0x15, 0xFF, 0xFF, 0xFF, 0xFF,
        0x48, 0x8B, 0xC8,
        0xFF, 0x15, 0xFF, 0xFF, 0xFF, 0xFF, // call qword ptr ds:[<&??5?$basic_istream@DU?$char_traits@D@std@@@std@@QEAAAEAV01@P6AAEAV01@AEAV01@@Z@Z>]
    ], [1, 5, 8, 12, 17, 21]);
    // hook stdin
    asmcode.commandQueue = commandQueue;
    asmcode.MultiThreadQueueTryDequeue = core_1.MultiThreadQueue.tryDequeue;
    proc_1.procHacker.patching('hook-stdin-command', 'ConsoleInputReader::getLine', 0, asmcode.ConsoleInputReader_getLine_hook, assembler_1.Register.rax, false, [
        0xE9, 0x3B, 0xF6, 0xFF, 0xFF,
        0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC // int3 ...
    ], [3, 7, 21, 25, 38, 42]);
    // remove original stdin thread
    const justReturn = assembler_1.asm().ret();
    proc_1.procHacker.write('ConsoleInputReader::ConsoleInputReader', 0, justReturn);
    proc_1.procHacker.write('ConsoleInputReader::~ConsoleInputReader', 0, justReturn);
    proc_1.procHacker.write('ConsoleInputReader::unblockReading', 0, justReturn);
}
function _launch(asyncResolve) {
    core_1.ipfilter.init(ip => {
        console.error(`[BDSX] traffic overed: ${ip}`);
    });
    core_1.jshook.init(err => {
        if (err instanceof Error) {
            err.stack = source_map_support_1.remapStack(err.stack);
            if (errorEvTarget.fire(err) !== common_1.CANCEL) {
                console.error(err.stack);
            }
        }
        else {
            console.error(err);
        }
    });
    asmcode.evWaitGameThreadEnd = dll_1.dll.kernel32.CreateEventW(null, 0, 0, null);
    core_1.uv_async.open();
    // uv async callback, when BDS closed perfectly
    function finishCallback() {
        core_1.uv_async.close();
        threadHandle.close();
        closeEvTarget.fire();
        util_1._tickCallback();
    }
    // // call game thread entry
    asmcode.gameThreadInner = proc_1.proc['<lambda_8914ed82e3ef519cb2a85824fbe333d8>::operator()'];
    asmcode.free = dll_1.dll.ucrtbase.free.pointer;
    asmcode.SetEvent = dll_1.dll.kernel32.SetEvent.pointer;
    // hook game thread
    asmcode.uv_async_call = core_1.uv_async.call;
    asmcode.WaitForSingleObject = dll_1.dll.kernel32.WaitForSingleObject.pointer;
    asmcode._Cnd_do_broadcast_at_thread_exit = dll_1.dll.msvcp140._Cnd_do_broadcast_at_thread_exit;
    proc_1.procHacker.patching('hook-game-thread', 'std::thread::_Invoke<std::tuple<<lambda_8914ed82e3ef519cb2a85824fbe333d8> >,0>', 6, asmcode.gameThreadHook, // original depended
    assembler_1.Register.rax, true, [
        0x48, 0x8B, 0xD9,
        0xE8, 0xF2, 0x56, 0x01, 0x00,
        0xE8, 0xF8, 0x3B, 0xB5, 0x00, // call <bedrock_server._Cnd_do_broadcast_at_thread_exit>
    ], []);
    // 1.16.210.05 - no google breakpad now
    // hook runtime error
    // procHacker.jumping('hook-runtime-error', 'google_breakpad::ExceptionHandler::HandleException', 0, asmcode.runtime_error, Register.rax, [
    //     0x48, 0x89, 0x5C, 0x24, 0x08,   // mov qword ptr ss:[rsp+8],rbx
    //     0x57,                           // push rdi
    //     0x48, 0x83, 0xEC, 0x20,         // sub rsp,20
    //     0x48, 0x8B, 0xF9,               // mov rdi,rcx
    // ], []);
    // procHacker.jumping('hook-invalid-parameter', 'google_breakpad::ExceptionHandler::HandleInvalidParameter', 0, asmcode.handle_invalid_parameter, Register.rax, [
    //     0x40, 0x55, // push rbp
    //     0x41, 0x54, // push r12
    //     0x41, 0x55, // push r13
    //     0x41, 0x56, // push r14
    //     0x41, 0x57, // push r15
    //     0x48, 0x8D, 0xAC, 0x24, 0x00, 0xF8, 0xFF, 0xFF, // lea rbp,qword ptr ss:[rsp-800]
    // ], []);
    // get server instance
    proc_1.procHacker.hookingRawWithCallOriginal('ServerInstance::ServerInstance', asmcode.ServerInstance_ctor_hook, [assembler_1.Register.rcx, assembler_1.Register.rdx, assembler_1.Register.r8], []);
    // it removes errors when run commands on shutdown.
    proc_1.procHacker.nopping('skip-command-list-destruction', 'ScriptEngine::~ScriptEngine', 0x7d, [
        0x48, 0x8D, 0x4B, 0x78,
        0xE8, 0x6A, 0xF5, 0xFF, 0xFF // call <bedrock_server.public: __cdecl std::deque<struct ScriptCommand,class std::allocator<struct ScriptCommand> >::~deque<struct ScriptCommand,class std::allocator<struct ScriptCommand> >(void) __ptr64>
    ], [5, 9]);
    // enable script
    proc_1.procHacker.nopping('force-enable-script', 'MinecraftServerScriptEngine::onServerThreadStarted', 0x38, [
        0xE8, 0x43, 0x61, 0xB1, 0xFF,
        0x84, 0xC0,
        0x0F, 0x84, 0x4E, 0x01, 0x00, 0x00,
        0x48, 0x8B, 0x17,
        0x48, 0x8B, 0xCF,
        0xFF, 0x92, 0x70, 0x04, 0x00, 0x00,
        0x48, 0x8B, 0xC8,
        0xE8, 0xE7, 0x28, 0x15, 0x00,
        0x48, 0x8B, 0xC8,
        0xE8, 0x4F, 0x66, 0x19, 0x00,
        0x84, 0xC0,
        0x0F, 0x84, 0x2A, 0x01, 0x00, 0x00 // je bedrock_server.7FF7345226F3
    ], [1, 5, 16, 20, 28, 32]);
    patchForStdio();
    require('./bds/implements');
    // seh wrapped main
    asmcode.bedrock_server_exe_args = core_1.bedrock_server_exe.args;
    asmcode.bedrock_server_exe_argc = core_1.bedrock_server_exe.argc;
    asmcode.bedrock_server_exe_main = core_1.bedrock_server_exe.main;
    asmcode.finishCallback = makefunc_1.makefunc.np(finishCallback, makefunc_1.RawTypeId.Void, null);
    {
        // restore main
        const unlock = new unlocker_1.MemoryUnlocker(core_1.bedrock_server_exe.main, 12);
        core_1.bedrock_server_exe.main.add().copyFrom(core_1.bedrock_server_exe.mainOriginal12Bytes, 12);
        unlock.done();
    }
    // call main as a new thread
    // main will create a game thread.
    // and bdsx will hijack the game thread and run it on the node thread.
    const [threadHandle] = capi_1.capi.createThread(asmcode.wrapped_main, null);
    // skip to create the console of BDS
    proc_1.procHacker.write('ScriptApi::ScriptFramework::registerConsole', 0, assembler_1.asm().mov_r_c(assembler_1.Register.rax, 1).ret());
    // hook on update
    asmcode.cgateNodeLoop = core_1.cgate.nodeLoop;
    asmcode.updateEvTargetFire = makefunc_1.makefunc.np(() => updateEvTarget.fire(), makefunc_1.RawTypeId.Void, null);
    proc_1.procHacker.patching('update-hook', '<lambda_8914ed82e3ef519cb2a85824fbe333d8>::operator()', 0x5f3, asmcode.updateWithSleep, assembler_1.Register.rcx, true, [
        0xE8, 0x3D, 0xDF, 0xB3, 0x00,
        0x48, 0x8B, 0xD8,
        0xE8, 0x2F, 0xDF, 0xB3, 0x00,
        0x48, 0x99,
        0x48, 0xF7, 0xFB,
        0x48, 0x69, 0xC8, 0x00, 0xCA, 0x9A, 0x3B,
        0x48, 0x69, 0xC2, 0x00, 0xCA, 0x9A, 0x3B,
        0x48, 0x99,
        0x48, 0xF7, 0xFB,
        0x48, 0x03, 0xC8,
        0x48, 0x8B, 0x44, 0x24, 0x20,
        0x48, 0x2B, 0xC1,
        0x48, 0x3D, 0x88, 0x13, 0x00, 0x00,
        0x7C, 0x0B,
        0x48, 0x8D, 0x4C, 0x24, 0x20,
        0xE8, 0x4B, 0xAA, 0xC6, 0xFF,
        0x90, // nop
    ], []);
    nethook_1.nethook.hooking(err => {
        err.stack = source_map_support_1.remapStack(err.stack);
        if (errorEvTarget.fire(err) !== common_1.CANCEL) {
            console.error(err.stack);
        }
    });
    command_2.hookingForCommand();
    // hook on script starting
    proc_1.procHacker.hookingRawWithCallOriginal('ScriptEngine::startScriptLoading', makefunc_1.makefunc.np((scriptEngine) => {
        try {
            core_1.cgate.nodeLoopOnce();
            bd_server.serverInstance = asmcode.serverInstance.as(bd_server.ServerInstance);
            nimodule.networkHandler = bd_server.serverInstance.networkHandler;
            openEvTarget.fire();
            asyncResolve();
            util_1._tickCallback();
            proc_1.procHacker.js('ScriptEngine::_processSystemInitialize', makefunc_1.RawTypeId.Void, null, core_1.VoidPointer)(scriptEngine);
            util_1._tickCallback();
            core_1.cgate.nodeLoopOnce();
        }
        catch (err) {
            source_map_support_1.remapAndPrintError(err);
        }
    }, makefunc_1.RawTypeId.Void, null, core_1.VoidPointer), [assembler_1.Register.rcx], []);
    // keep ScriptEngine variables. idk why it needs.
    proc_1.procHacker.write('MinecraftServerScriptEngine::onServerUpdateEnd', 0, assembler_1.asm().ret());
}
const stopfunc = proc_1.procHacker.js('DedicatedServer::stop', makefunc_1.RawTypeId.Void, null, core_1.VoidPointer);
const commandVersion = proc_1.proc['CommandVersion::CurrentVersion'].getInt32();
const commandContextRefCounterVftable = proc_1.proc["std::_Ref_count_obj2<CommandContext>::`vftable'"];
const CommandOriginWrapper = pointer_1.Wrapper.make(commandorigin_1.CommandOrigin.ref());
const commandContextConstructor = proc_1.procHacker.js('CommandContext::CommandContext', makefunc_1.RawTypeId.Void, null, command_1.CommandContext, pointer_1.CxxStringWrapper, CommandOriginWrapper, makefunc_1.RawTypeId.Int32);
const CommandContextPtr = sharedpointer_1.SharedPtr.make(command_1.CommandContext);
function createCommandContext(command, commandOrigin) {
    const sharedptr = new CommandContextPtr(true);
    sharedptr.create(commandContextRefCounterVftable);
    commandContextConstructor(sharedptr.p, command, commandOrigin, commandVersion);
    return sharedptr;
}
const serverCommandOriginConstructor = proc_1.procHacker.js('ServerCommandOrigin::ServerCommandOrigin', makefunc_1.RawTypeId.Void, null, commandorigin_1.ServerCommandOrigin, pointer_1.CxxStringWrapper, level_1.ServerLevel, makefunc_1.RawTypeId.Int32, dimension_1.Dimension);
function createServerCommandOrigin(name, level, permissionLevel, dimension) {
    const wrapper = new CommandOriginWrapper(true);
    const origin = capi_1.capi.malloc(commandorigin_1.ServerCommandOrigin[nativetype_1.NativeType.size]).as(commandorigin_1.ServerCommandOrigin);
    wrapper.value = origin;
    serverCommandOriginConstructor(origin, name, level, permissionLevel, dimension);
    return wrapper;
}
const deleteServerCommandOrigin = makefunc_1.makefunc.js([0, 0], makefunc_1.RawTypeId.Void, { this: commandorigin_1.ServerCommandOrigin }, makefunc_1.RawTypeId.Int32);
commandorigin_1.ServerCommandOrigin[nativetype_1.NativeType.dtor] = () => deleteServerCommandOrigin.call(this, 1);
function sessionIdGrabber(text) {
    const tmp = text.match(/\[\d{4}-\d\d-\d\d \d\d:\d\d:\d\d INFO\] Session ID (.*)$/);
    if (tmp) {
        bedrockServer.sessionId = tmp[1];
        logEvTarget.remove(sessionIdGrabber);
    }
}
logEvTarget.on(sessionIdGrabber);
var bedrockServer;
(function (bedrockServer) {
    /**
     * after BDS launched
     */
    bedrockServer.open = openEvTarget;
    /**
     * after BDS closed
     */
    bedrockServer.close = closeEvTarget;
    bedrockServer.update = updateEvTarget;
    /**
    * global error listeners
    * if returns CANCEL, then default error printing is disabled
    */
    bedrockServer.error = errorEvTarget;
    bedrockServer.bedrockLog = logEvTarget;
    bedrockServer.commandOutput = commandOutputEvTarget;
    /**
     * stop the BDS
     * It will stop next tick
     */
    function stop() {
        const server = bd_server.serverInstance.server;
        stopfunc(server.add(8));
    }
    bedrockServer.stop = stop;
    function forceKill(exitCode) {
        core_1.bedrock_server_exe.forceKill(exitCode);
    }
    bedrockServer.forceKill = forceKill;
    function launch() {
        return new Promise((resolve, reject) => {
            if (launched) {
                reject(source_map_support_1.remapError(Error('Cannot launch BDS again')));
                return;
            }
            launched = true;
            _launch(resolve);
        });
    }
    bedrockServer.launch = launch;
    /**
     * pass to stdin
     */
    function executeCommandOnConsole(command) {
        commandQueueBuffer.construct();
        commandQueueBuffer.value = command;
        commandQueue.enqueue(commandQueueBuffer);
    }
    bedrockServer.executeCommandOnConsole = executeCommandOnConsole;
    /**
     * it does the same thing with executeCommandOnConsole
     * but call the internal function directly
     */
    function executeCommand(command, permissionLevel = 4, dimension = null) {
        const str = new pointer_1.CxxStringWrapper(true);
        str.construct();
        str.value = 'Server';
        const origin = createServerCommandOrigin(str, bd_server.serverInstance.minecraft.getLevel(), // I'm not sure it's always ServerLevel
        permissionLevel, dimension);
        str.value = command;
        const ctx = createCommandContext(str, origin);
        const res = bd_server.serverInstance.minecraft.commands.executeCommand(ctx, false);
        ctx.destruct();
        origin.destruct();
        str.destruct();
        return res;
    }
    bedrockServer.executeCommand = executeCommand;
    let stdInHandler = null;
    class DefaultStdInHandler {
        constructor() {
            this.online = executeCommandOnConsole;
            this.onclose = () => {
                this.close();
            };
            // empty
        }
        static install() {
            if (stdInHandler !== null)
                throw source_map_support_1.remapError(Error('Already opened'));
            return stdInHandler = new DefaultStdInHandlerGetLine;
        }
    }
    bedrockServer.DefaultStdInHandler = DefaultStdInHandler;
    /**
     * this handler has bugs on Linux+Wine
     */
    class DefaultStdInHandlerJs extends DefaultStdInHandler {
        constructor() {
            super();
            this.rl = readline.createInterface({
                input: process.stdin,
                output: process.stdout
            });
            this.rl.on('line', line => this.online(line));
            bedrockServer.close.on(this.onclose);
        }
        close() {
            if (stdInHandler === null)
                return;
            console.assert(stdInHandler !== null);
            stdInHandler = null;
            this.rl.close();
            this.rl.removeAllListeners();
            bedrockServer.close.remove(this.onclose);
        }
    }
    class DefaultStdInHandlerGetLine extends DefaultStdInHandler {
        constructor() {
            super();
            this.getline = new getline_1.GetLine(line => this.online(line));
            bedrockServer.close.on(this.onclose);
        }
        close() {
            if (stdInHandler === null)
                return;
            console.assert(stdInHandler !== null);
            stdInHandler = null;
            this.getline.close();
        }
    }
})(bedrockServer = exports.bedrockServer || (exports.bedrockServer = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF1bmNoZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsYXVuY2hlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBK0M7QUFDL0MsMkNBQTRDO0FBQzVDLDJDQUF5RDtBQUN6RCx1REFBeUU7QUFDekUsK0NBQTRDO0FBQzVDLHVDQUEwQztBQUMxQyxxQ0FBOEM7QUFDOUMsaUNBQThCO0FBQzlCLHVDQUE4QztBQUM5QyxxQ0FBNEM7QUFDNUMsaUNBQTJJO0FBQzNJLCtCQUE0QjtBQUM1Qix1Q0FBb0M7QUFDcEMseUNBQWlEO0FBQ2pELDZDQUFxRDtBQUNyRCx1Q0FBb0M7QUFDcEMsdUNBQXNEO0FBQ3RELG1EQUE0QztBQUM1Qyw2REFBa0Y7QUFDbEYseUNBQTRDO0FBQzVDLGlDQUF1QztBQUN2QywyQ0FBbUY7QUFFbkYscUNBQXNDO0FBQ3RDLGlDQUFrQztBQUNsQywwQ0FBMkM7QUFDM0Msb0RBQXFEO0FBQ3JELHlDQUEwQztBQWUxQyxNQUFNLEtBQUs7SUFBWDtRQUNZLGNBQVMsR0FBRyxFQUFFLENBQUM7SUFZM0IsQ0FBQztJQVhHLEtBQUssQ0FBQyxHQUFVO1FBQ1osTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxJQUFJLE9BQU8sS0FBSyxDQUFDLENBQUMsRUFBRTtZQUNoQixJQUFJLENBQUMsU0FBUyxJQUFJLEdBQUcsQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQztTQUNmO2FBQU07WUFDSCxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ3BELElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDekMsT0FBTyxHQUFHLENBQUM7U0FDZDtJQUNMLENBQUM7Q0FDSjtBQUVELE1BQU0scUJBQXFC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