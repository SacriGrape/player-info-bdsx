"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bin128_t = exports.bin64_t = exports.CxxString = exports.float64_t = exports.float32_t = exports.int64_as_float_t = exports.int32_t = exports.int16_t = exports.int8_t = exports.uint64_as_float_t = exports.uint32_t = exports.uint16_t = exports.uint8_t = exports.bool_t = exports.NativeType = exports.NativeDescriptorBuilder = void 0;
const symbols_1 = require("./bds/symbols");
const common_1 = require("./common");
const core_1 = require("./core");
const makefunc_1 = require("./makefunc");
const singleton_1 = require("./singleton");
var NativeTypeFn;
(function (NativeTypeFn) {
    NativeTypeFn.size = Symbol('size');
    NativeTypeFn.align = Symbol('align');
    NativeTypeFn.getter = Symbol('getter');
    NativeTypeFn.setter = Symbol('setter');
    NativeTypeFn.ctor = Symbol('ctor');
    NativeTypeFn.dtor = Symbol('dtor');
    NativeTypeFn.ctor_copy = Symbol('ctor_copy');
    NativeTypeFn.ctor_move = Symbol('ctor_move');
    NativeTypeFn.isNativeClass = Symbol('isNativeClass');
    NativeTypeFn.descriptor = Symbol('descriptor');
})(NativeTypeFn || (NativeTypeFn = {}));
function defaultCopy(size) {
    return (to, from) => {
        to.copyFrom(from, size);
    };
}
class NativeDescriptorBuilder {
    constructor() {
        this.desc = {};
        this.types = [];
        this.ctor = new NativeDescriptorBuilder.UseContextCtor;
        this.dtor = new NativeDescriptorBuilder.UseContextDtor;
        this.ctor_copy = new NativeDescriptorBuilder.UseContextCtorCopy;
    }
}
exports.NativeDescriptorBuilder = NativeDescriptorBuilder;
(function (NativeDescriptorBuilder) {
    class UseContext {
        constructor() {
            this.code = '';
            this._use = false;
            this.offset = 0;
        }
        setPtrOffset(offset) {
            if (!this._use) {
                this._use = true;
                this.initUse();
            }
            const delta = offset - this.offset;
            if (delta !== 0)
                this.code += `ptr.move(${delta});\n`;
            this.offset = offset;
        }
    }
    NativeDescriptorBuilder.UseContext = UseContext;
    class UseContextCtor extends UseContext {
        initUse() {
            this.code += `const ptr = this.add();\n`;
        }
    }
    NativeDescriptorBuilder.UseContextCtor = UseContextCtor;
    class UseContextDtor extends UseContext {
        initUse() {
            this.code += `const ptr = this.add();\n`;
        }
    }
    NativeDescriptorBuilder.UseContextDtor = UseContextDtor;
    class UseContextCtorCopy extends UseContext {
        setPtrOffset(offset) {
            if (!this._use) {
                this._use = true;
                this.initUse();
            }
            const delta = offset - this.offset;
            if (delta !== 0)
                this.code += `ptr.move(${delta});\noptr.move(${delta});\n`;
            this.offset = offset;
        }
        initUse() {
            this.code += `const ptr = this.add();\nconst optr = o.add();\n`;
        }
    }
    NativeDescriptorBuilder.UseContextCtorCopy = UseContextCtorCopy;
})(NativeDescriptorBuilder = exports.NativeDescriptorBuilder || (exports.NativeDescriptorBuilder = {}));
class NativeType {
    constructor(size, align, get, set, ctor = common_1.emptyFunc, dtor = common_1.emptyFunc, ctor_copy = defaultCopy(size), ctor_move = ctor_copy) {
        this[NativeType.size] = size;
        this[NativeType.align] = align;
        this[NativeType.getter] = get;
        this[NativeType.setter] = set;
        this[NativeType.ctor] = ctor;
        this[NativeType.dtor] = dtor;
        this[NativeType.ctor_copy] = ctor_copy;
        this[NativeType.ctor_move] = ctor_move;
    }
    extends(fields) {
        const type = this;
        const ntype = new NativeType(type[NativeType.size], type[NativeType.align], (ptr, offset) => type[NativeType.getter](ptr, offset), (ptr, v, offset) => type[NativeType.setter](ptr, v, offset));
        if (fields) {
            for (const field in fields) {
                ntype[field] = fields[field];
            }
        }
        return ntype;
    }
    ref() {
        return refSingleton.newInstance(this, () => makeReference(this));
    }
    [(NativeTypeFn.getter, NativeTypeFn.setter, NativeTypeFn.ctor, NativeTypeFn.dtor, NativeTypeFn.ctor_move, NativeTypeFn.ctor_copy, NativeTypeFn.size, NativeTypeFn.align, NativeTypeFn.descriptor)](builder, key, offset) {
        common_1.abstract();
    }
    static defaultDescriptor(builder, key, offset) {
        const type = this;
        builder.desc[key] = {
            get() { return type[NativeType.getter](this, offset); },
            set(value) { return type[NativeType.setter](this, value, offset); }
        };
        const typeidx = builder.types.push(type) - 1;
        if (type[NativeType.ctor] !== common_1.emptyFunc) {
            builder.ctor.setPtrOffset(offset);
            builder.ctor.code += `types[${typeidx}][NativeType.ctor](ptr);\n`;
        }
        if (type[NativeType.dtor] !== common_1.emptyFunc) {
            builder.dtor.setPtrOffset(offset);
            builder.dtor.code += `types[${typeidx}][NativeType.dtor](ptr);\n`;
        }
        builder.ctor_copy.setPtrOffset(offset);
        builder.ctor_copy.code += `types[${typeidx}][NativeType.ctor_copy](ptr, optr);\n`;
    }
}
exports.NativeType = NativeType;
NativeType.getter = NativeTypeFn.getter;
NativeType.setter = NativeTypeFn.setter;
NativeType.ctor = NativeTypeFn.ctor;
NativeType.dtor = NativeTypeFn.dtor;
NativeType.ctor_copy = NativeTypeFn.ctor_copy;
NativeType.ctor_move = NativeTypeFn.ctor_move;
NativeType.size = NativeTypeFn.size;
NativeType.align = NativeTypeFn.align;
NativeType.descriptor = NativeTypeFn.descriptor;
NativeType.prototype[NativeTypeFn.descriptor] = NativeType.defaultDescriptor;
const refSingleton = new singleton_1.Singleton();
function makeReference(type) {
    return new NativeType(8, 8, (ptr) => type[NativeType.getter](ptr.getPointer()), (ptr, v) => type[NativeType.setter](ptr.getPointer(), v));
}
core_1.VoidPointer[NativeType.size] = 8;
core_1.VoidPointer[NativeType.align] = 8;
core_1.VoidPointer[NativeType.getter] = function (ptr, offset) {
    return ptr.getPointerAs(this, offset);
};
core_1.VoidPointer[NativeType.setter] = function (ptr, value, offset) {
    ptr.setPointer(value, offset);
};
core_1.VoidPointer[NativeType.ctor] = common_1.emptyFunc;
core_1.VoidPointer[NativeType.dtor] = common_1.emptyFunc;
core_1.VoidPointer[NativeType.ctor_copy] = function (to, from) {
    to.copyFrom(from, 8);
};
core_1.VoidPointer[NativeType.ctor_move] = function (to, from) {
    this[NativeType.ctor_copy](to, from);
};
core_1.VoidPointer[NativeType.descriptor] = NativeType.defaultDescriptor;
exports.bool_t = new NativeType(1, 1, (ptr, offset) => ptr.getBoolean(offset), (ptr, v, offset) => ptr.setBoolean(v, offset));
exports.uint8_t = new NativeType(1, 1, (ptr, offset) => ptr.getInt8(offset), (ptr, v, offset) => ptr.setInt8(v, offset));
exports.uint16_t = new NativeType(2, 2, (ptr, offset) => ptr.getInt16(offset), (ptr, v, offset) => ptr.setInt16(v, offset));
exports.uint32_t = new NativeType(4, 4, (ptr, offset) => ptr.getUint32(offset), (ptr, v, offset) => ptr.setUint32(v, offset));
exports.uint64_as_float_t = new NativeType(8, 8, (ptr, offset) => ptr.getUint64AsFloat(offset), (ptr, v, offset) => ptr.setUint64WithFloat(v, offset));
exports.int8_t = new NativeType(1, 1, (ptr, offset) => ptr.getUint8(offset), (ptr, v, offset) => ptr.setUint8(v, offset));
exports.int16_t = new NativeType(2, 2, (ptr, offset) => ptr.getUint16(offset), (ptr, v, offset) => ptr.setUint16(v, offset));
exports.int32_t = new NativeType(4, 4, (ptr, offset) => ptr.getInt32(offset), (ptr, v, offset) => ptr.setInt32(v, offset));
exports.int64_as_float_t = new NativeType(8, 8, (ptr, offset) => ptr.getInt64AsFloat(offset), (ptr, v, offset) => ptr.setInt64WithFloat(v, offset));
exports.float32_t = new NativeType(4, 4, (ptr, offset) => ptr.getFloat32(offset), (ptr, v, offset) => ptr.setFloat32(v, offset));
exports.float64_t = new NativeType(8, 8, (ptr, offset) => ptr.getFloat64(offset), (ptr, v, offset) => ptr.setFloat64(v, offset));
const string_ctor = makefunc_1.makefunc.js(symbols_1.proc2['??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QEAA@XZ'], makefunc_1.RawTypeId.Void, null, core_1.VoidPointer);
const string_dtor = makefunc_1.makefunc.js(symbols_1.proc['std::basic_string<char,std::char_traits<char>,std::allocator<char> >::_Tidy_deallocate'], makefunc_1.RawTypeId.Void, null, core_1.VoidPointer);
exports.CxxString = new NativeType(0x20, 8, (ptr, offset) => ptr.getCxxString(offset), (ptr, v, offset) => ptr.setCxxString(v, offset), string_ctor, string_dtor, (to, from) => {
    to.setCxxString(from.getCxxString());
}, (to, from) => {
    to.copyFrom(from, 0x20);
    string_ctor(from);
});
exports.bin64_t = new NativeType(8, 8, (ptr, offset) => ptr.getBin64(offset), (ptr, v, offset) => ptr.setBin(v, offset)).extends({
    one: '\u0001\0\0\0',
    zero: '\0\0\0\0',
    minus_one: '\uffff\uffff\uffff\uffff',
});
exports.bin128_t = new NativeType(16, 8, (ptr) => ptr.getBin(8), (ptr, v) => ptr.setBin(v)).extends({
    one: '\u0001\0\0\0',
    zero: '\0\0\0\0',
    minus_one: '\uffff\uffff\uffff\uffff',
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF0aXZldHlwZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm5hdGl2ZXR5cGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsMkNBQTRDO0FBQzVDLHFDQUErQztBQUMvQyxpQ0FBb0Q7QUFDcEQseUNBQWlEO0FBQ2pELDJDQUF3QztBQUV4QyxJQUFVLFlBQVksQ0FZckI7QUFaRCxXQUFVLFlBQVk7SUFFTCxpQkFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN0QixrQkFBSyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN4QixtQkFBTSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMxQixtQkFBTSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMxQixpQkFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN0QixpQkFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN0QixzQkFBUyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNoQyxzQkFBUyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNoQywwQkFBYSxHQUFHLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN4Qyx1QkFBVSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNuRCxDQUFDLEVBWlMsWUFBWSxLQUFaLFlBQVksUUFZckI7QUE2QkQsU0FBUyxXQUFXLENBQUMsSUFBVztJQUM1QixPQUFPLENBQUMsRUFBZ0IsRUFBRSxJQUFrQixFQUFDLEVBQUU7UUFDM0MsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDNUIsQ0FBQyxDQUFDO0FBQ04sQ0FBQztBQUVELE1BQWEsdUJBQXVCO0lBQXBDO1FBQ29CLFNBQUksR0FBeUIsRUFBRSxDQUFDO1FBQ2hDLFVBQUssR0FBZSxFQUFFLENBQUM7UUFFdkIsU0FBSSxHQUFH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